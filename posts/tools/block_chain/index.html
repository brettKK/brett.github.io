<!DOCTYPE html>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/default.min.css">
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/languages/yaml.min.js"></script>
<html lang="zh-cn">
  <head>
    <title>区块链技术 | brettkk</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="区块链技术与应用 🔗肖臻 区块链不可能三角： scalabilit">
<meta name="generator" content="Hugo 0.103.1" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link href="https://cdn.bootcss.com/highlight.js/9.15.10/styles/zenburn.min.css" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<link rel="stylesheet" href="http://brettkk.github.io/css/syntax.css" />


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">←</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">区块链技术</h1>

    <div class="tip">
        <time datetime="2022-12-05 11:33:56 &#43;0800 CST">Dec 5, 2022</time>
        <span class="split">
          ·
        </span>
        <span>
          4759 words
        </span>
        <span class="split">
          ·
        </span>
        <span>
          10 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#区块链技术与应用"><code>区块链技术与应用</code></a>
      <ul>
        <li><a href="#技术分层">技术分层</a></li>
        <li><a href="#btc">BTC</a></li>
        <li><a href="#eth-以太坊">ETH 以太坊</a></li>
        <li><a href="#区块链中的树">区块链中的树</a></li>
        <li><a href="#挖矿">挖矿</a>
          <ul>
            <li><a href="#sol-语言">sol 语言</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#公链开发的教程大纲">公链开发的教程大纲</a></li>
    <li><a href="#区块链钱包">区块链钱包</a>
      <ul>
        <li><a href="#区块链钱包的教程大纲">区块链钱包的教程大纲</a></li>
        <li><a href="#私钥公钥地址签名助记词">私钥，公钥，地址，签名，助记词</a></li>
        <li><a href="#以太坊的-p2p-网络">以太坊的 P2P 网络</a></li>
      </ul>
    </li>
    <li><a href="#web3">web3</a></li>
    <li><a href="#solidity">solidity</a>
      <ul>
        <li><a href="#从源码开始生产-solc">从源码开始生产 solc</a></li>
        <li><a href="#可能遇到的问题">可能遇到的问题</a></li>
        <li><a href="#独有的语言特性">独有的语言特性</a></li>
        <li><a href="#solidity-compiler-solc-编译器">solidity compiler (solc 编译器)</a></li>
        <li><a href="#合约审计工具">合约审计工具</a></li>
        <li><a href="#合约事件监听器">合约事件监听器</a></li>
        <li><a href="#公链技术">公链技术</a></li>
        <li><a href="#polygon">Polygon</a></li>
        <li><a href="#uniswap">uniswap</a>
          <ul>
            <li><a href="#v1">v1</a></li>
            <li><a href="#v2">v2</a></li>
            <li><a href="#v3">v3</a></li>
          </ul>
        </li>
        <li><a href="#量化交易">量化交易</a></li>
      </ul>
    </li>
    <li><a href="#合约-futures-现货-spot-杠杆-margin">合约 futures 现货 spot 杠杆 margin</a></li>
    <li><a href="#nft--gamefi--metaverse">NFT &amp; GameFi &amp; Metaverse</a>
      <ul>
        <li><a href="#awesome-blockchain-rust">awesome-blockchain-rust</a></li>
      </ul>
    </li>
    <li><a href="#零知识证明">零知识证明</a>
      <ul>
        <li><a href="#knowledge---vector---多项式">knowledge -&gt; vector -&gt; 多项式</a></li>
        <li><a href="#zk-snark-多项式的零知识证明">zk-snark 多项式的零知识证明</a></li>
        <li><a href="#程序到多项式的构造">程序到多项式的构造</a></li>
        <li><a href="#数学表达">数学表达</a></li>
        <li><a href="#拉格朗日插值">拉格朗日插值</a></li>
      </ul>
    </li>
    <li><a href="#钱包">钱包</a></li>
    <li><a href="#好项目">好项目</a></li>
    <li><a href="#最近发展">最近发展</a>
      <ul>
        <li><a href="#性能扩展">性能扩展</a></li>
        <li><a href="#隐私匿名">隐私匿名</a></li>
        <li><a href="#跨链">跨链</a></li>
      </ul>
    </li>
    <li><a href="#铭文">铭文</a></li>
    <li><a href="#move-语言的生态链">move 语言的生态链</a></li>
    <li><a href="#ton">ton</a></li>
    <li><a href="#不看好区块链技术的观点">不看好区块链技术的观点</a></li>
    <li><a href="#工作-jd-上的要求">工作 jd 上的要求</a>
      <ul>
        <li><a href="#前端-jsts">前端 js，ts</a></li>
        <li><a href="#公链开发">公链开发</a></li>
        <li><a href="#zk-研发工程师">zk 研发工程师</a></li>
        <li><a href="#cosmos-区块链开发">cosmos 区块链开发</a></li>
      </ul>
    </li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <h1 id="区块链技术与应用"><code>区块链技术与应用</code> <a href="#%e5%8c%ba%e5%9d%97%e9%93%be%e6%8a%80%e6%9c%af%e4%b8%8e%e5%ba%94%e7%94%a8" class="anchor">🔗</a></h1><p>肖臻</p>
<p>区块链不可能三角： scalability， decentralization， security</p>
<h2 id="技术分层">技术分层 <a href="#%e6%8a%80%e6%9c%af%e5%88%86%e5%b1%82" class="anchor">🔗</a></h2><p>layer2: 应用层，合约层。<br>
layer1: 底层区块链。激励层（发币和分配机制）， 共识层（Pow, Pos, DPos），网络层（P2P）， 数据层（Merkle 树，非对称加密）<br>
layer0: 传输层。<br></p>
<h2 id="btc">BTC <a href="#btc" class="anchor">🔗</a></h2><p>proof of work: 做 hash 函数的蛮力运算来获取产生新区块的资格<br></p>
<p>出块时间 10min 左右。</p>
<p>coinmarketcap.com</p>
<p>&lt;key=hash_value, value&gt; 存在在 kv 数据库 leveldb 中。</p>
<h2 id="eth-以太坊">ETH 以太坊 <a href="#eth-%e4%bb%a5%e5%a4%aa%e5%9d%8a" class="anchor">🔗</a></h2><p>账户： 20 个字节。 在以太坊中的地址标识符是无法区分的<br>
合约账户和外部账户的主要区别在于合约账户有关联的合约代码。<br>
eth 的 eth_getCode 这个方法来判断代码哈希是否为空<br></p>
<p>交易，调用</p>
<p>费用 = gasUsed * gasPrice</p>
<p>EVM， Solidity, web3.js</p>
<p>《精通以太坊》 github.com/ethereumbook/ethereumbook</p>
<p>以太坊白皮书，黄皮书。</p>
<p>区块浏览器 etherscan.io</p>
<p>ghost 协议。</p>
<h2 id="区块链中的树">区块链中的树 <a href="#%e5%8c%ba%e5%9d%97%e9%93%be%e4%b8%ad%e7%9a%84%e6%a0%91" class="anchor">🔗</a></h2><p>Proof of Inclusion. 证明包含 <br></p>
<p>一笔交易是否在链上。怎么证明？ 如果交易存为数组，向轻节点提供完整的 array 才可以。 如果交易存为 map，也需要知道完整的。</p>
<p><code>merkle tree</code> 是一种对 array 求 hash 的方法，把提供包含证明的复杂度降低了。</p>
<pre tabindex="0"><code>block：
        block header (prev hash, Nonce,    Root hash)
                                    hash01              hash23
                                hash0     hash1     hash2   hash3
                                Txn0       Txn1     Txn2     Txn3
</code></pre><p>证明 Txn3 在区块链中： <code>PoI(Txn3) = [(hash2, hash01), MerkleRoot, Index3]</code></p>
<p><code>Merkle Patricia Tree</code>，根据 key 的前缀进行索引，对 map 算 hash。<code>Radix tree</code>, <code>Trie</code>。</p>
<h2 id="挖矿">挖矿 <a href="#%e6%8c%96%e7%9f%bf" class="anchor">🔗</a></h2><p>共识算法： Pow。 比特币和以太坊均采用。 为了避免 asci 芯片挖矿，以太坊加入 ethash 增加内存访问。</p>
<h3 id="sol-语言">sol 语言 <a href="#sol-%e8%af%ad%e8%a8%80" class="anchor">🔗</a></h3><p>运用在 EVM 上，</p>
<p>contract 中的 mapping 不支持遍历， 用数组记录 map 中的 key 集合。</p>
<p>支持去中心化的合约（smart contract）。</p>
<p>proof of stake: 权益证明。</p>
<p>NPos：提名者通过质押投票产生提名池， 在提名池中产生验证者且均分奖励，验证者根据质押比例分配奖励。</p>
<h1 id="公链开发的教程大纲">公链开发的教程大纲 <a href="#%e5%85%ac%e9%93%be%e5%bc%80%e5%8f%91%e7%9a%84%e6%95%99%e7%a8%8b%e5%a4%a7%e7%ba%b2" class="anchor">🔗</a></h1><p><code>learnblockchain.cn/maps/Web3</code> 制作的图谱</p>
<p>公链</p>
<ul>
<li>bitcoin</li>
<li>以太坊</li>
<li>以太坊的 layer2 方案
<ul>
<li>数据可用层，去中心化排序器，Rollup 模块（op rollup, zk rollup），op 的欺诈证明，零知识证明</li>
</ul>
</li>
<li>cosmos 解决链之间的互操作性和扩展性</li>
<li>solana</li>
<li>aptos，Sui 高性能的区块链平台，move 语言作为合约开发。</li>
</ul>
<p>公链基础知识： 区块，交易，默克尔树，区块头，公钥加密算法，共识算法，智能合约，状态树，虚拟机，去中心化网络。</p>
<p>共识算法： pow，pos，poh（solana）</p>
<p>密码学： 零知识证明。 算法（Kzg， Groth16， Sonic， Fractal， Halo2， SuperSonic， Marlin， Plonk， Stark， SNARK）</p>
<p>数据库： leveldb， rocksdb， mongodb</p>
<p>以太坊： ethereum RPC 服务节点搭建， 使用的签名算法，各套带前缀 RPC 接口的作用，底层数据结构和算法， EVM 原理和 op-code， 区块重组和回滚机制， 重要的 EIP 协议分析，分片链 EIP4844 的原理和实现。</p>
<p>以太坊 layer2: 主流项目分析.</p>
<ul>
<li>Arbitrum Nitro, 架构解析，如何本地启动 Nitro devnet 网络， Rollup 流程</li>
<li>Optimistim，Op-stack 结构解析，Op-stack 跨链调用过程，erc20 的充提过程， Rollup 流程，</li>
<li>PolygonZkEVM</li>
</ul>
<p>Rollup 模块： 数据 rollup, 证明 rollup
Sequencer： 基于 geth 改进的适配 l2 的 EVM 客户端
证明和验证系统： zk proof（链下 zk prove 生成证明，链上 verifier 合约验证） 和 fraud proof（）。</p>
<h1 id="区块链钱包">区块链钱包 <a href="#%e5%8c%ba%e5%9d%97%e9%93%be%e9%92%b1%e5%8c%85" class="anchor">🔗</a></h1><p>银行卡是由中心化的银行发放和进行资产管理，用户密码丢失可以让银行找回。<br>
区块链钱包是密钥的管理工具，包含成对的公私钥。</p>
<h2 id="区块链钱包的教程大纲">区块链钱包的教程大纲 <a href="#%e5%8c%ba%e5%9d%97%e9%93%be%e9%92%b1%e5%8c%85%e7%9a%84%e6%95%99%e7%a8%8b%e5%a4%a7%e7%ba%b2" class="anchor">🔗</a></h2><p>为什么有不同类别的钱包？ 私钥的管理方式不同导致的类别</p>
<ul>
<li>
<p>中心化钱包，例如交易所钱包（充值，提现，归集，热转冷，冷转热，链路风控）</p>
</li>
<li>
<p>去中心钱包，私钥一般管理在用户的设备上，例如 TP，ImToken, MetaMask</p>
<ul>
<li>一般都是确定性分层钱包： 先生成助记词，导出主私钥，主私钥扩展子私钥和公钥的方式，公钥再导出地址。</li>
</ul>
</li>
<li>
<p>硬件钱包，私钥在离线的硬件设备上，例如 leger，onekey</p>
</li>
<li>
<p>确定性分层钱包（去中心化钱包，硬件钱包）：使用 BIP 协议族开发的钱包，例如 TP,ImToken,MetaMask</p>
</li>
<li>
<p>多签钱包： EVM 链一般使用 gnosis safe 多签</p>
</li>
<li>
<p>托管钱包： MPC 算法，每个节点有一个密钥片， 算法 GG8，GG20。</p>
</li>
<li>
<p>社交恢复钱包： 密钥分片备份，守护者恢复</p>
</li>
<li>
<p>EVM 链的 AA 钱包： ERC4337 协议独有特性</p>
</li>
</ul>
<h2 id="私钥公钥地址签名助记词">私钥，公钥，地址，签名，助记词 <a href="#%e7%a7%81%e9%92%a5%e5%85%ac%e9%92%a5%e5%9c%b0%e5%9d%80%e7%ad%be%e5%90%8d%e5%8a%a9%e8%ae%b0%e8%af%8d" class="anchor">🔗</a></h2><p>在椭圆双曲线（伽罗瓦有限域）上指定生成点<code>G</code>和私钥数字<code>k</code>， <code>K=k*G</code> 多次加法操作生成公钥点<code>K</code>。
已知<code>K</code>,<code>G</code>时极其困难推出私钥<code>k</code>。</p>
<p>  公钥点 -- hash -&gt; 钱包地址。</p>
<p>签名： 证明私钥持有者同意交易内容。</p>
<p>助记词， <code>BIP39</code>, 助记词 + salt --BIP39--》 seed 种子 --BIP32--&gt; 生成多层的私钥。 BIP44.</p>
<h2 id="以太坊的-p2p-网络">以太坊的 P2P 网络 <a href="#%e4%bb%a5%e5%a4%aa%e5%9d%8a%e7%9a%84-p2p-%e7%bd%91%e7%bb%9c" class="anchor">🔗</a></h2><p>P2P 的点对点的传播是区块链的底层传输方式。<br></p>
<ol>
<li>节点之间互相广播用于节点发现的 udp 网络</li>
<li>节点之间互相连接用于传输数据的 tcp 网络</li>
</ol>
<p>节点 NodeID 经过 hash 计算后的 256 个 byte 做 xor 比较数理上的距离（不是物理距离）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-golang" data-lang="golang"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">net</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">Network</span>) <span style="color:#a6e22e">loop</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">pkt</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">read</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 处理收到的 udp 消息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">timeout</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">timeout</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 发送的 udp ping 消息超时未收到 pong 应答
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">q</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">queryReq</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 从table中查找距离某个target最近的n个节点
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">case</span> <span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">tableOpReq</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 操作table, 这个case主要是为了防止table被异步操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">case</span> <span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">refreshTimer</span>.<span style="color:#a6e22e">C</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// 计时器到点，刷新table里的url
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="web3">web3 <a href="#web3" class="anchor">🔗</a></h1><p>DeFi (Decentralised Finance)， MakerDao, AAVE, Compound， RWA。 主流质押协议。 去中心化交易所 dex。</p>
<p>DAO 去中心的组织。去中心化、自治、公开透明。例如比特币可以看作是一个 DAO。
DID 去中心化身份。</p>
<p>中心化交易所的业务： 现货，合约，做市商， OTC，量化。</p>
<p>ipfs</p>
<h1 id="solidity">solidity <a href="#solidity" class="anchor">🔗</a></h1><p>EVM 可以获取和存储数据的 6 个地方： (memory, storage, calldata)(data location 只能描述 array， struct， map), stack, code, logs.</p>
<h2 id="从源码开始生产-solc">从源码开始生产 solc <a href="#%e4%bb%8e%e6%ba%90%e7%a0%81%e5%bc%80%e5%a7%8b%e7%94%9f%e4%ba%a7-solc" class="anchor">🔗</a></h2><h2 id="可能遇到的问题">可能遇到的问题 <a href="#%e5%8f%af%e8%83%bd%e9%81%87%e5%88%b0%e7%9a%84%e9%97%ae%e9%a2%98" class="anchor">🔗</a></h2><p>系统里缺少<code>Boost</code>库。 需要指明<code>Boost_INCLUDE_DIR</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>➜  build git:<span style="color:#f92672">(</span>develop<span style="color:#f92672">)</span> cmake ..
</span></span><span style="display:flex;"><span>-- The C compiler identification is AppleClang 15.0.0.15000309
</span></span><span style="display:flex;"><span>-- The CXX compiler identification is AppleClang 15.0.0.15000309
</span></span><span style="display:flex;"><span>-- Detecting C compiler ABI info
</span></span><span style="display:flex;"><span>-- Detecting C compiler ABI info - <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>-- Check <span style="color:#66d9ef">for</span> working C compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cc - skipped
</span></span><span style="display:flex;"><span>-- Detecting C compile features
</span></span><span style="display:flex;"><span>-- Detecting C compile features - <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>-- Detecting CXX compiler ABI info
</span></span><span style="display:flex;"><span>-- Detecting CXX compiler ABI info - <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>-- Check <span style="color:#66d9ef">for</span> working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/c++ - skipped
</span></span><span style="display:flex;"><span>-- Detecting CXX compile features
</span></span><span style="display:flex;"><span>-- Detecting CXX compile features - <span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>CMake Error at /opt/homebrew/Cellar/cmake/3.24.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:230 <span style="color:#f92672">(</span>message<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>  Could NOT find Boost <span style="color:#f92672">(</span>missing: Boost_INCLUDE_DIR filesystem
</span></span><span style="display:flex;"><span>  unit_test_framework program_options system<span style="color:#f92672">)</span> <span style="color:#f92672">(</span>Required is at least version
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;1.65.0&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Call Stack <span style="color:#f92672">(</span>most recent call first<span style="color:#f92672">)</span>:
</span></span><span style="display:flex;"><span>  /opt/homebrew/Cellar/cmake/3.24.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:594 <span style="color:#f92672">(</span>_FPHSA_FAILURE_MESSAGE<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  /opt/homebrew/Cellar/cmake/3.24.2/share/cmake/Modules/FindBoost.cmake:2376 <span style="color:#f92672">(</span>find_package_handle_standard_args<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  cmake/EthDependencies.cmake:40 <span style="color:#f92672">(</span>find_package<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>  CMakeLists.txt:51 <span style="color:#f92672">(</span>include<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>mac 上通过<code>brew install boost</code></p>
<h2 id="独有的语言特性">独有的语言特性 <a href="#%e7%8b%ac%e6%9c%89%e7%9a%84%e8%af%ad%e8%a8%80%e7%89%b9%e6%80%a7" class="anchor">🔗</a></h2><ul>
<li>修饰器 <code>modifier</code> 去给函数加限制。 <code>modifier onlyOwner { require(msg.sender == over, &quot;not contract owner&quot;); _;}</code></li>
<li>事件<code>Event</code> 产生日志 log。</li>
<li>函数的参数为 struct，map， array 类型时需要加修饰符 memory or calldata。</li>
<li>override， virtual</li>
</ul>
<p>receive，fallback . msg.data is empty?</p>
<h2 id="solidity-compiler-solc-编译器">solidity compiler (solc 编译器) <a href="#solidity-compiler-solc-%e7%bc%96%e8%af%91%e5%99%a8" class="anchor">🔗</a></h2><p>x.sol --solc --&gt; (ABI + 字节码) --web3.js --&gt; 部署到网络中。</p>
<p>编译器源码地址：。</p>
<h2 id="合约审计工具">合约审计工具 <a href="#%e5%90%88%e7%ba%a6%e5%ae%a1%e8%ae%a1%e5%b7%a5%e5%85%b7" class="anchor">🔗</a></h2><p>slither</p>
<h2 id="合约事件监听器">合约事件监听器 <a href="#%e5%90%88%e7%ba%a6%e4%ba%8b%e4%bb%b6%e7%9b%91%e5%90%ac%e5%99%a8" class="anchor">🔗</a></h2><p>the graph</p>
<h2 id="公链技术">公链技术 <a href="#%e5%85%ac%e9%93%be%e6%8a%80%e6%9c%af" class="anchor">🔗</a></h2><p>Ethereum, Hyperledger 联盟链。</p>
<p>性能扩展： Conflux, Eth2.0 分片，Plasma 侧链， 跨链 Polkadot</p>
<h2 id="polygon">Polygon <a href="#polygon" class="anchor">🔗</a></h2><p>扩容的目的： 提升交易速度和交易吞吐量，而不影响去中心化和安全性
Polygon 是以太坊 layer2 扩容的主要解决方案。 zk rollup, Optimistic Rollups.</p>
<ul>
<li>on-chain， layer1 扩容
<ul>
<li>共识算法，中心化换性能， avalanche, solana</li>
<li>分片， 并行计算， eth2.0， Near</li>
</ul>
</li>
<li>off-chain， layer2 扩容， 链下计算，结果上链
<ul>
<li>各种扩容方案的区别在与 保证 State Validity 状态的正确性（SV） 和 Data Availablity 数据的可用性(DA)的方式不同。</li>
<li>SV 作恶
<ul>
<li>如何保证 layer2 state 的正确的？ zk proof， Fraud Proof， PoA 多签， Light client？</li>
<li>防止 layer2 的无效状态回传到主链</li>
</ul>
</li>
<li>DA 跑路
<ul>
<li>如何保证 layer2 state 的持久化， 存去中心化的 layer1？存中心化的 layer2？</li>
</ul>
</li>
<li>RollUp
<ul>
<li>DA 上， layer2 的数据压缩后传到 layer1， 由 layer1 保证 DA</li>
<li>SV 上， zk rollup() 兼容 EVM 不太好，zkEVM 需要开发；和 optimistic rollup（op,arbitrum）较好兼容 EVM, Fraud proof 保证，定期同步状态。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="uniswap">uniswap <a href="#uniswap" class="anchor">🔗</a></h2><p>DEX 赛道的头部协议，uniswap 是基于以太坊的去中心话交易协议，通过智能合约自动执行代币互换。</p>
<p>sushiswap， curve， Balancer</p>
<p>订单薄，自动做市商。</p>
<h3 id="v1">v1 <a href="#v1" class="anchor">🔗</a></h3><p>恒定乘积曲线，引导 AMM 机制走向主流。</p>
<h3 id="v2">v2 <a href="#v2" class="anchor">🔗</a></h3><p>sushiswap 的竞争。</p>
<h3 id="v3">v3 <a href="#v3" class="anchor">🔗</a></h3><h2 id="量化交易">量化交易 <a href="#%e9%87%8f%e5%8c%96%e4%ba%a4%e6%98%93" class="anchor">🔗</a></h2><ul>
<li>跨平台搬砖</li>
<li>趋势交易</li>
<li>对冲</li>
</ul>
<p>区块链资产场外交易（OTC 交易）：不通过撮合成交，自己寻找交易。</p>
<h1 id="合约-futures-现货-spot-杠杆-margin">合约 futures 现货 spot 杠杆 margin <a href="#%e5%90%88%e7%ba%a6-futures-%e7%8e%b0%e8%b4%a7-spot-%e6%9d%a0%e6%9d%86-margin" class="anchor">🔗</a></h1><p>杠杆不同： 现货 1 倍，合约 100 倍，杠杆 10 倍。</p>
<p>合约： 利用杠杆放大收益的金融工具。投入的本金作为仓位保证金，当仓位亏完时，就爆仓（强制平仓）。<br></p>
<h1 id="nft--gamefi--metaverse">NFT &amp; GameFi &amp; Metaverse <a href="#nft--gamefi--metaverse" class="anchor">🔗</a></h1><p>NFT 是遵循 ERC721 协议发行的代币。</p>
<p>NFT 起源于以太坊的智能合约， 在 EIP-721 中被提出， 在 EIP-1155 被改进。</p>
<p>NFT 发行的主流公链：eth, Polygon, BSC, SOL 等。 ETH 主流， NFT 代币标准 ERC721, ERC1155。</p>
<p>EOS， KOL</p>
<h2 id="awesome-blockchain-rust">awesome-blockchain-rust <a href="#awesome-blockchain-rust" class="anchor">🔗</a></h2><p>使用 rust 开发的 solana 与以太坊等区块链不同的公链。<br>
<code>Polkadot</code> 跨链。</p>
<h1 id="零知识证明">零知识证明 <a href="#%e9%9b%b6%e7%9f%a5%e8%af%86%e8%af%81%e6%98%8e" class="anchor">🔗</a></h1><p>匿名币 Zcash</p>
<h2 id="knowledge---vector---多项式">knowledge -&gt; vector -&gt; 多项式 <a href="#knowledge---vector---%e5%a4%9a%e9%a1%b9%e5%bc%8f" class="anchor">🔗</a></h2><h2 id="zk-snark-多项式的零知识证明">zk-snark 多项式的零知识证明 <a href="#zk-snark-%e5%a4%9a%e9%a1%b9%e5%bc%8f%e7%9a%84%e9%9b%b6%e7%9f%a5%e8%af%86%e8%af%81%e6%98%8e" class="anchor">🔗</a></h2><p>程序计算 -&gt; 算数电路 -&gt; R1CS -&gt; 多项式 -&gt; 证明多项式</p>
<p><code>Proving Key</code>, <code>Verifying Key</code></p>
<h2 id="程序到多项式的构造">程序到多项式的构造 <a href="#%e7%a8%8b%e5%ba%8f%e5%88%b0%e5%a4%9a%e9%a1%b9%e5%bc%8f%e7%9a%84%e6%9e%84%e9%80%a0" class="anchor">🔗</a></h2><h2 id="数学表达">数学表达 <a href="#%e6%95%b0%e5%ad%a6%e8%a1%a8%e8%be%be" class="anchor">🔗</a></h2><h2 id="拉格朗日插值">拉格朗日插值 <a href="#%e6%8b%89%e6%a0%bc%e6%9c%97%e6%97%a5%e6%8f%92%e5%80%bc" class="anchor">🔗</a></h2><p>  通过点值对构造多项式。</p>
<p>$$
f_1(x) = \frac{(x-x_2)(x-x_3)}{(x_1-x_2)(x_1-x_3)}
$$</p>
<p>  f(x)在 x1 处，等于 y1，其他 x 处均为 0。<br></p>
<p>$$
f(x) = \sum_{i=1}^{n}y_i f_i(x)
$$</p>
<h1 id="钱包">钱包 <a href="#%e9%92%b1%e5%8c%85" class="anchor">🔗</a></h1><p>HD（分层确定性钱包）wallet 的基础是 BIP32/BIP39/BIP44(BIP 协议族) 这三个协议。 <br></p>
<p>图</p>
<p>BIP32: 一个助记词/种子，可以生成一个树形的结构 <br></p>
<p>BIP39: 一个助记词-》关联确定性种子,种子生成确定性私钥 <br></p>
<p>BIP44: 扩展 BIP32。多币种的基础，一个种子可以生成多个账户，每个账户有自己的地址空间，用户可以同一个钱包管理多种资产<br></p>
<p>得到助记词: 生成 128-256 位的一个随机数，通过 sha256 生成一个校验和+随机数长度/32，切割字符串为 11 段，从 2048 个字符数组中，选择助记词
得到私钥: 助记词+随机数-〉通过 PBKDF2 生成私钥， 这里因为 BIP39 协议所以固定助记词的私钥固定
得到公钥: 通过私钥*ecc 中的曲线上的一个点，生成一个公钥，这里曲线的点是一个固定的点，所以不会生成多个公钥</p>
<p>如何生成一个钱包， 助记词， 私钥，公钥。</p>
<p>钱包开发者： 扫块入账，交易回滚， 离线签名， L1 L2 跨链， BIP 钱包协议族。 Uniswap。
github《区块链钱包技术指南》
爬块服务。
用户，资产，交易，NFT， social = socialfi。</p>
<p>交易所充提币的解析， 热钱包地址，归集地址。</p>
<h1 id="好项目">好项目 <a href="#%e5%a5%bd%e9%a1%b9%e7%9b%ae" class="anchor">🔗</a></h1><p>eth 上的 uniswap, bsc 上的 pancakeswap</p>
<h1 id="最近发展">最近发展 <a href="#%e6%9c%80%e8%bf%91%e5%8f%91%e5%b1%95" class="anchor">🔗</a></h1><h2 id="性能扩展">性能扩展 <a href="#%e6%80%a7%e8%83%bd%e6%89%a9%e5%b1%95" class="anchor">🔗</a></h2><p>区块大小扩大，出块时间，扩容，隔离见证，树图，conflux<br></p>
<p>layer2 op rollup 的代表： optimism, arbitrum。
arbitrum 的 arb 排序器， 验证节点，争议解决，锁仓 7 天。</p>
<p>侧链： polygon, BNB chain。</p>
<p>layer2 zk-rollup 的代表：Linea, zksync, Scroll(zkstark)</p>
<p>性能： avalanche, solana</p>
<h2 id="隐私匿名">隐私匿名 <a href="#%e9%9a%90%e7%a7%81%e5%8c%bf%e5%90%8d" class="anchor">🔗</a></h2><p>门罗币，zk_sync,环形签名，交易隐私性，混币</p>
<h2 id="跨链">跨链 <a href="#%e8%b7%a8%e9%93%be" class="anchor">🔗</a></h2><p>多链： polkadot， Cosmos， Avalanche</p>
<h1 id="铭文">铭文 <a href="#%e9%93%ad%e6%96%87" class="anchor">🔗</a></h1><p>Ordinals 协议为 BTC 的聪进行编码，也可把数据植入到聪。 Sats 币。</p>
<p>ordinals (2022.12) btc 生态上的 NFT， BRC-20（2023.03）铭文， Runes 符文（2024.04.20）</p>
<h1 id="move-语言的生态链">move 语言的生态链 <a href="#move-%e8%af%ad%e8%a8%80%e7%9a%84%e7%94%9f%e6%80%81%e9%93%be" class="anchor">🔗</a></h1><p>sui， aptos。</p>
<h1 id="ton">ton <a href="#ton" class="anchor">🔗</a></h1><h1 id="不看好区块链技术的观点">不看好区块链技术的观点 <a href="#%e4%b8%8d%e7%9c%8b%e5%a5%bd%e5%8c%ba%e5%9d%97%e9%93%be%e6%8a%80%e6%9c%af%e7%9a%84%e8%a7%82%e7%82%b9" class="anchor">🔗</a></h1><p>构造去中心化，获得公平和信任，牺牲了效率。</p>
<p>BTC 还是掌握在少部分人手里。</p>
<h1 id="工作-jd-上的要求">工作 jd 上的要求 <a href="#%e5%b7%a5%e4%bd%9c-jd-%e4%b8%8a%e7%9a%84%e8%a6%81%e6%b1%82" class="anchor">🔗</a></h1><h2 id="前端-jsts">前端 js，ts <a href="#%e5%89%8d%e7%ab%af-jsts" class="anchor">🔗</a></h2><p>因为智能合约开发框架 <code>hardhat</code>，使用了前端测试框架 <code>Mocha</code>，断言库 <code>Chai</code>
<code>npx mocha a.test.js</code></p>
<p><code>nextjs.org/docs</code> <code>React</code></p>
<p><code>yarn create next-app .</code>
<code>yarn run dev</code> -&gt; <code>localhost:3000</code>
<code>yarn add --dev hardhat</code> <code>yarn hardhat</code></p>
<h2 id="公链开发">公链开发 <a href="#%e5%85%ac%e9%93%be%e5%bc%80%e5%8f%91" class="anchor">🔗</a></h2><p>rust, go.
区块链底层，公链的架构， 底层协议，共识算法， 智能合约， 加密算法， p2p 网络</p>
<p>EVM = 执行引擎， 状态数据库， 高效状态树，P2P， 去中心化 sequencer 协议。</p>
<p>EIP 1559 交易费，拥堵。</p>
<h2 id="zk-研发工程师">zk 研发工程师 <a href="#zk-%e7%a0%94%e5%8f%91%e5%b7%a5%e7%a8%8b%e5%b8%88" class="anchor">🔗</a></h2><p>c++, rust, go. zk-snarks, zk-starks, ethereum, bitcoin.
zkEVM 经验， 熟悉 GPU， asic， 有 cuda， openCL 经验。</p>
<ul>
<li>智能合约编程语言 solidity</li>
<li>智能合约库 openzeppelin</li>
<li>智能合约开发框架（不推荐 remix） Hardhat， truffle
<ul>
<li>js 开发的 npm 包。</li>
</ul>
</li>
<li>全栈框架 Nextjs</li>
<li>CSS 框架 Tailwindcss</li>
<li>智能合约交互库 Ethersjs</li>
<li>智能合约交互库 React Hooks, Wagmi</li>
<li>去中心化存储 IPFS， 固定服务 Pinata</li>
</ul>
<h2 id="cosmos-区块链开发">cosmos 区块链开发 <a href="#cosmos-%e5%8c%ba%e5%9d%97%e9%93%be%e5%bc%80%e5%8f%91" class="anchor">🔗</a></h2><p>负责基于 Evmos（Cosmos SDK）公链开发。</p>
<p>资格： 拥有使用 cosmos sdk 开发区块链的经验， 有 EVM 的经验，掌握 solidity 语言，在 evm 链上部署合约。
参与过开源项目（ethereum, cosmos, optimism）, zkSNARKS or zkSTARKS 的使用经验。</p>
<ul>
<li>区块链基础
<ul>
<li>分布式账本，共识机制</li>
</ul>
</li>
<li>最小链系统设计
<ul>
<li>数据层： Merkle Tree(验证数据的完整性，一致性), Merkle DAG, Merkle Patricia Trie(MPT), 账户管理（BTC 的 UTXO， cell 模型，以太坊 Account 模型，EOA， SCA）， 世界状态
<ul>
<li>结点，区块（区块头，区块体），交易</li>
</ul>
</li>
</ul>
<ul>
<li>执行层：交易结构，交易池，执行引擎</li>
<li>网络层： Peer 2Peer 对等网络通讯，P2P 覆盖网络（Gossip， Kademlia）</li>
<li>共识层： PoW， Pos， PBFT， RAFT</li>
</ul>
</li>
<li>DApp 开发
<ul>
<li>基于区块链进行开发（侧链，layer2， 跨链）</li>
<li>基于 VM（以太坊的 EVM， solana 的 WASAM， JSVM）</li>
<li>结合分布式存储，实现无服务器架构应用的搭建</li>
<li>MEV 套利，链的交易池监听</li>
</ul>
</li>
</ul>

    </div>

    
        <div class="tags">
            
                <a href="http://brettkk.github.io/tags/%E5%8A%A0%E5%AF%86">加密</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <script src="https://utteranc.es/client.js"
repo="brettKK/brettkk.github.io"
issue-term="title"
theme="github-light"
crossorigin="anonymous"
async>
</script>  

    <div class="copyright">
    
       © Copyright 
       2025 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-cactus-plus'>nodejh</a>
      </div>
    
</footer>




  </body>
</html>
